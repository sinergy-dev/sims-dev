/*! jQuery email input - v1.0.5 - 2013-11-29
* https://github.com/jongha/jquery.emailinput
* Copyright (c) 2013 Jong-Ha Ahn; Licensed MIT */
!function(a){a.fn.emailinput=function(b){var c=a.extend({id:"eai_input",onlyValidValue:!0,delim:","},b);b=a.extend(c,b);var d=function(a){var b=/^([A-Za-z0-9_\-\.\+])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;return b.test(a)},e=function(c){var d=[];c.find("span"+(b.onlyValidValue?".ei_valid":"")).each(function(){d.push(a(this).data("address"))}),c.data("ref").val(d.join(b.delim))},f=function(b,c){if(c=a.trim(c),""!==c){var f=d(c);b.append(a("<span></span>").data("address",c).attr({title:c}).html(c).addClass("ei_box").addClass(f?"ei_valid":"ei_invalid").bind("click",function(){a(this).remove(),e(b)})),e(b)}},g=function(a){var b=a.parent();b.find("span:last").last().remove(),e(b)};return this.each(function(){var c=a("<div class='emailMultiSelector' style='padding-top: 3px;padding-left: 3px;'></div>").addClass(a(this).attr("class")).data("ref",a(this));c.bind("click",function(){var d=a("#"+b.id);0===d.length&&(d=a("<input />").attr({id:b.id,attr:"text"}).addClass("ei_box").css("border","none").bind("keydown",function(b){switch(b.keyCode){case 13:f(a(this).parent(),a(this).val()),a(this).remove(),c.click();break;case 27:f(a(this).parent(),""),a(this).remove();break;case 8:case 46:""===a(this).val()&&g(a(this))}}).bind("blur",function(){f(a(this).parent(),a(this).val()),a(this).remove()}),a(this).append(d)),setTimeout(function(){d.focus()},5)}),a(this).hide(),a(this).parent().after().append(c);for(var d=a(this).val().split(b.delim),e=0;e<d.length;++e)""!==d[e]&&f(c,d[e])}),this}}(jQuery);